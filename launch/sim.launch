<launch>

    <include file="$(find controls)/launch/controls.launch">
        <arg name="sim" value="true" />
    </include>
    <!--<include file="$(find state_estimation)/launch/no_firmware.launch"/>-->
    <include file="$(find propulsion)/launch/propulsion.launch">
        <arg name="sim" value="true" />
    </include>
    <include file="$(find vision)/launch/vision.launch">
        <arg name="sim" value="true" />
    </include>
    <node name="transform_broadcaster_sim" pkg="auv-sim-gazebo" type="transform_broadcaster_sim.py" output="screen"/>

    <param name="sim" value="true" />

    <node name="pose" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/world/quali/dynamic_pose/info@geometry_msgs/PoseArray@ignition.msgs.Pose_V">
    </node>

    <node name="bridge_thruster1" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster1_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>
              
    <node name="bridge_thruster2" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster2_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_thruster3" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster3_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_thruster4" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster4_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_thruster5" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster5_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_thruster6" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster6_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_thruster7" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster7_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_thruster8" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/model/clarke/joint/thruster8_joint/cmd_pos@std_msgs/Float64@ignition.msgs.Double">
    </node>

    <node name="bridge_imu" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/imu@sensor_msgs/Imu@ignition.msgs.IMU">
    </node>

    <node name="bridge_depth_cam" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/vision/front_cam/aligned_depth_to_color/image_raw@sensor_msgs/Image@ignition.msgs.Image">
    </node>

    <node name="bridge_front_cam" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/vision/front_cam/color/image_raw@sensor_msgs/Image@ignition.msgs.Image">
    </node>

    <node name="bridge_down_cam" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="/vision/down_cam/image_raw@sensor_msgs/Image@ignition.msgs.Image">
    </node> 

    <node name="bridge_front_cam_info" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="vision/front_cam/camera_info@sensor_msgs/CameraInfo@ignition.msgs.CameraInfo">
        <remap from="vision/front_cam/camera_info" to="/vision/front_cam/aligned_depth_to_color/camera_info"/>
    </node> 

    <!-- <node name="bridge_point_cloud" pkg="ros_ign_bridge" type="parameter_bridge" output="screen"
        args="vision/front_cam/depth/points@sensor_msgs/PointCloud2@ignition.msgs.PointCloudPacked">
        <remap from="vision/front_cam/depth/points" to="vision/front_cam/point_cloud"/>
    </node>  -->

    <node 
        name="bridge_py" pkg="auv-sim-gazebo" type="bridge.py" output="screen">
    </node> 

</launch>
